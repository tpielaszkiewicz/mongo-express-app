/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Renderer","sap/ui/core/IconPool","sap/m/library","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/library"],function(e,t,a,n,i,s){"use strict";var r=s.TextDirection;var l=s.ValueState;var o=a.SelectType;var c={apiVersion:2};c.CSS_CLASS="sapMSlt";c.render=function(e,a){var i=a.getTooltip_AsString(),s=a.getType(),r=a.getAutoAdjustWidth(),d=a.getEditable(),g=a.getEnabled(),S=a.getWidth(),u=S.indexOf("%")>-1,p=r||S==="auto"||u,f=c.CSS_CLASS;e.openStart("div",a);this.addClass(e,a);e.class(f);e.class(f+a.getType());if(!g){e.class(f+"Disabled")}else if(!d){e.class(f+"Readonly")}if(p&&s===o.Default){e.class(f+"MinWidth")}if(r){e.class(f+"AutoAdjustedWidth")}else{e.style("width",S)}if(a.getIcon()){e.class(f+"WithIcon")}if(g&&d&&n.system.desktop){e.class(f+"Hoverable")}e.class(f+"WithArrow");if(a.getValueState()!==l.None){this.addValueStateClasses(e,a)}e.style("max-width",a.getMaxWidth());if(i){e.attr("title",i)}else if(s===o.IconOnly){var I=t.getIconInfo(a.getIcon());if(I){e.attr("title",I.text)}}e.openEnd();this.renderHiddenSelect(e,a);this.renderLabel(e,a);switch(s){case o.Default:this.renderArrow(e,a);break;case o.IconOnly:this.renderIcon(e,a);break}var h=a.getList();if(a._isShadowListRequired()&&h){this.renderShadowList(e,h)}e.close("div")};c.renderHiddenSelect=function(e,t){var a=t.getList(),n,i;e.openStart("select",t.getId()+"-hiddenSelect");this.writeAccessibilityState(e,t);if(t.getRequired()){e.attr("required","required")}if(!t.getEnabled()){e.attr("disabled","disabled")}e.attr("name",t.getName());e.attr("value",t.getSelectedKey());e.class("sapUiPseudoInvisibleText");e.class(c.CSS_CLASS+"HiddenSelect");e.openEnd();for(i=0,n=a.getItems();i<n.length;i++){e.openStart("option");e.attr("value",n[i].getText());e.attr("hidden",true);e.openEnd();e.text(n[i].getText());e.close("option")}e.close("select")};c.renderLabel=function(t,a){var n=a.getSelectedItem(),i=a.getTextDirection(),s=e.getTextAlign(a.getTextAlign(),i),d=c.CSS_CLASS;t.openStart("span",a.getId()+"-label");t.class(d+"Label");if(a.getValueState()!==l.None){t.class(d+"LabelState");t.class(d+"Label"+a.getValueState())}if(a.getType()===o.IconOnly){t.class("sapUiPseudoInvisibleText")}if(i!==r.Inherit){t.attr("dir",i.toLowerCase())}t.style("text-align",s);t.openEnd();if(a.getType()!==o.IconOnly){t.renderControl(a._getValueIcon());t.openStart("span",a.getId()+"-labelText");t.class("sapMSelectListItemText");t.openEnd();t.text(n&&n.getParent()?n.getText():null);t.close("span")}t.close("span")};c.renderArrow=function(e,t){var a=c.CSS_CLASS;e.openStart("span",t.getId()+"-arrow");e.class(a+"Arrow");if(t.getValueState()!==l.None){e.class(a+"ArrowState")}e.openEnd().close("span")};c.renderIcon=function(e,t){var a=t.getTooltip_AsString();e.icon(t.getIcon(),c.CSS_CLASS+"Icon",{id:t.getId()+"-icon",title:a||null})};c.renderShadowList=function(e,t){var a=t.getRenderer();a.writeOpenListTag(e,t,{elementData:false});this.renderShadowItems(e,t);a.writeCloseListTag(e,t)};c.renderShadowItems=function(e,t){var a=t.getRenderer(),n=t.getItems().length,i=t.getSelectedItem();for(var s=0,r=t.getItems();s<r.length;s++){a.renderItem(e,t,r[s],{selected:i===r[s],setsize:n,posinset:s+1,elementData:false})}};c.addClass=function(e,t){};c.addValueStateClasses=function(e,t){e.class(c.CSS_CLASS+"State");e.class(c.CSS_CLASS+t.getValueState())};c.getAriaRole=function(e){switch(e.getType()){case o.Default:return"combobox";case o.IconOnly:return"button"}};c._getValueStateString=function(e){var t="sap.ui.core";switch(e.getValueState()){case l.Success:return i.getStaticId(t,"VALUE_STATE_SUCCESS");case l.Warning:return i.getStaticId(t,"VALUE_STATE_WARNING");case l.Information:return i.getStaticId(t,"VALUE_STATE_INFORMATION")}return""};c.writeAccessibilityState=function(e,a){var n=this._getValueStateString(a),i=a.getSelectedItem(),s=a.getType()===o.IconOnly,r=a._getValueIcon(),c=[],d=[],g,S,u;a.getLabels().forEach(function(e){if(e&&e.getId){c.push(e.getId())}});if(a.isOpen()&&i&&i.getDomRef()){S=i.getId()}if(i&&!i.getText()&&i.getIcon&&i.getIcon()){var p=t.getIconInfo(i.getIcon());if(p){u=p.text||p.name}}if(u&&r){n=r.getId()}if(n){d.push(n)}if(c.length){d=d.concat(c)}g={value:d.join(" "),append:true};e.accessibilityState(null,{role:this.getAriaRole(a),roledescription:a._sAriaRoleDescription,readonly:s?undefined:a.getEnabled()&&!a.getEditable(),expanded:a.isOpen(),invalid:a.getValueState()===l.Error?true:undefined,labelledby:s||g.value===""?undefined:g,activedescendant:S,haspopup:"listbox"})};return c},true);